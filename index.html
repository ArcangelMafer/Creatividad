<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AIDEX ‚Äî Plataforma de trading (Dark)</title>

  <!-- =========================
       Estilos (Dark-first)
       ========================= -->
  <style>
    /* ---- Variables de tema ---- */
    :root{
      --bg-1: #05060a;        /* fondo principal muy oscuro */
      --bg-2: #0b1117;        /* secciones / paneles */
      --card: #0f1720;
      --muted: #98a1ad;
      --text: #e6eef6;
      --accent: #0ea5ff;      /* azul el√©ctrico */
      --accent-2: #2563eb;    /* azul profundo */
      --glass: rgba(255,255,255,0.02);
      --border: rgba(255,255,255,0.04);
      --radius: 12px;
      --max-w: 1200px;
      --shadow: 0 10px 30px rgba(2,6,23,0.7);
    }

    /* ---- Reset y base ---- */
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: linear-gradient(180deg,var(--bg-1) 0%, var(--bg-2) 100%);
      color:var(--text);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.45;
      padding-bottom:90px;
    }
    a{color:var(--accent); text-decoration:none}
    img{max-width:100%; display:block}
    .container{max-width:var(--max-w); margin:0 auto; padding:0 20px;}

    /* ---- Header / Navbar ---- */
    header{
      position:sticky; top:0; z-index:60;
      backdrop-filter: blur(6px);
      background: linear-gradient(180deg, rgba(6,8,12,0.65), rgba(6,10,16,0.40));
      border-bottom: 1px solid var(--border);
    }
    .nav{height:72px; display:flex; align-items:center; justify-content:space-between; gap:16px;}
    .brand{display:flex; align-items:center; gap:12px; font-weight:700}
    .logo{
      width:46px; height:46px; border-radius:10px;
      background: linear-gradient(135deg,var(--accent-2),var(--accent));
      display:flex; align-items:center; justify-content:center; color:#021; font-weight:800; font-size:16px;
      box-shadow: 0 8px 28px rgba(37,99,235,0.12);
    }
    .brand .texts{line-height:1}
    .brand .name{font-size:16px}
    .brand .tag{font-size:12px; color:var(--muted)}

    nav.desktop{display:flex; gap:14px; align-items:center}
    nav.desktop a{padding:8px 10px; border-radius:8px; color:var(--muted); font-size:15px}
    nav.desktop a:hover{background:var(--glass); color:var(--accent)}

    .cta{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 14px; background:linear-gradient(90deg,var(--accent),var(--accent-2));
      color:#021; font-weight:700; border-radius:10px;
      box-shadow: 0 12px 36px rgba(14,165,255,0.12);
    }

    .hamburger{display:none; background:transparent; border:0; color:var(--muted); font-size:20px; padding:8px; border-radius:8px}
    .mobile-menu{display:none; padding:10px 0}

    /* ---- Hero ---- */
    .hero{padding:56px 0 36px}
    .hero-grid{display:grid; grid-template-columns:1fr 520px; gap:28px; align-items:center}
    .hero-title{font-size:36px; margin:0 0 12px; font-weight:800; line-height:1.05}
    .hero-sub{color:var(--muted); max-width:60ch}
    .hero-cta{display:flex; gap:12px; margin-top:18px}
    .stat-row{display:flex; gap:12px; margin-top:18px}
    .stat{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
      padding:12px 16px; border-radius:10px; border:1px solid var(--border);
      font-weight:700; color:var(--text); font-size:15px;
    }

    .hero-card{
      border-radius:14px; overflow:hidden; box-shadow:var(--shadow); border:1px solid var(--border);
      background: linear-gradient(180deg, rgba(2,6,23,0.6), rgba(2,6,23,0.45));
    }
    .hero-image{width:100%; height:320px; object-fit:cover; display:block; filter:contrast(1.05) saturate(1.05)}

    /* ---- Sections ---- */
    section{padding:48px 0}
    .section-title{display:flex; justify-content:space-between; align-items:center; margin-bottom:18px}
    .section-title h2{margin:0; font-size:20px}
    .cards{display:grid; grid-template-columns:repeat(3,1fr); gap:16px}
    .card{
      background:var(--card); border-radius:12px; padding:18px; border:1px solid var(--border);
      box-shadow: 0 8px 20px rgba(2,6,23,0.45);
    }
    .card h3{margin:0; font-size:16px}
    .card p{color:var(--muted); margin-top:8px; font-size:14px}

    /* Platforms grid */
    .platforms-grid{display:grid; grid-template-columns:repeat(4,1fr); gap:12px}
    .platform{
      padding:14px; border-radius:10px; background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
      text-align:center; border:1px solid var(--border)
    }

    /* Education */
    .resources{display:flex; gap:12px; flex-wrap:wrap}
    .resource{min-width:200px; padding:12px; border-radius:10px; border:1px solid var(--border); background:var(--glass)}

    /* Footer */
    footer{padding:30px 0 80px; background:transparent}
    .footer-grid{display:flex; gap:30px; flex-wrap:wrap; align-items:flex-start; justify-content:space-between}
    .socials{display:flex; gap:8px}
    .socials a{padding:8px; border-radius:10px; background:var(--glass); color:var(--muted); font-weight:600}

    /* Floating CTA */
    .floating-cta{position:fixed; right:18px; bottom:18px; padding:12px 16px; border-radius:999px; background:linear-gradient(90deg,var(--accent),var(--accent-2)); color:#021; box-shadow:0 12px 40px rgba(14,165,255,0.14); z-index:50; display:none}
    @media (max-width:680px){ .floating-cta{display:inline-flex} }

    /* Reveal animation simple */
    .fade-up{opacity:0; transform:translateY(8px); animation:fadeUp .7s forwards}
    .fade-up.delay-1{animation-delay:.12s}
    .fade-up.delay-2{animation-delay:.22s}
    @keyframes fadeUp{to{opacity:1; transform:none}}

    /* small helpers */
    .muted{color:var(--muted)}
    .small{font-size:13px}
    .pill{display:inline-block; padding:8px 12px; border-radius:999px; background:rgba(255,255,255,0.02); font-weight:600; color:var(--text)}

    /* Responsive */
    @media (max-width:980px){
      .hero-grid{grid-template-columns:1fr; gap:20px}
      .cards{grid-template-columns:repeat(2,1fr)}
      .platforms-grid{grid-template-columns:repeat(2,1fr)}
      nav.desktop{display:none}
      .hamburger{display:inline-block}
      .mobile-menu{display:block}
    }
    @media (max-width:640px){
      .cards{grid-template-columns:1fr}
      .hero-image{height:220px}
      .brand .texts{display:none}
      #chat-box{width:calc(100vw - 24px); right:12px; bottom:82px}
    }

    /* ---- Chat styles (bubble + window) ---- */
    /* Bubble */
    #chat-bubble {
      position: fixed;
      right: 22px;
      bottom: 22px;
      background: linear-gradient(90deg,var(--accent),var(--accent-2));
      color: #021;
      font-size: 22px;
      border-radius: 50%;
      width: 56px;
      height: 56px;
      display: flex; align-items: center; justify-content: center;
      cursor: pointer; box-shadow: 0 12px 36px rgba(37,99,235,0.12);
      z-index:120;
      animation: float 2.4s ease-in-out infinite;
      transition: transform 0.3s ease;
    }
    #chat-bubble:hover{transform:scale(1.05)}
    @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-5px)}}

    /* Chat window */
    #chat-box {
      position: fixed;
      right: 22px;
      bottom: 92px;
      width: 360px;
      max-height: 500px;
      background: linear-gradient(180deg, rgba(10,14,20,0.95), rgba(11,16,22,0.93));
      border: 1px solid var(--border);
      border-radius: 14px;
      box-shadow: 0 18px 50px rgba(2,6,23,0.85);
      display: flex; flex-direction: column; overflow: hidden; z-index:125;
      transition: opacity 0.3s ease, transform 0.3s ease;
    }
    #chat-box.hidden{
      opacity:0;
      transform:translateY(20px) scale(0.95);
      pointer-events:none;
    }

    .chat-header {
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      color:#021; font-weight:700; padding:12px 16px; display:flex; justify-content:space-between; align-items:center;
    }
    .chat-header .title{font-size:15px; display:flex; align-items:center; gap:8px}
    .chat-header button{background:transparent;border:0;color:#021;font-size:18px;cursor:pointer; padding:4px 8px; border-radius:6px; transition:background 0.2s}
    .chat-header button:hover{background:rgba(0,0,0,0.1)}

    #chat-body {
      flex:1; padding:14px; overflow-y:auto; font-size:14px; display:flex; flex-direction:column; gap:10px;
      background: linear-gradient(180deg, transparent, rgba(255,255,255,0.01));
      max-height:360px;
    }
    #chat-body::-webkit-scrollbar{width:6px}
    #chat-body::-webkit-scrollbar-track{background:transparent}
    #chat-body::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.1); border-radius:3px}

    .bot-message, .user-message {
      max-width:85%; padding:11px 13px; border-radius:12px; line-height:1.4; word-wrap:break-word;
      animation: messageSlide 0.3s ease;
    }
    @keyframes messageSlide{from{opacity:0; transform:translateY(10px)}to{opacity:1; transform:translateY(0)}}
    
    .bot-message { 
      background: rgba(255,255,255,0.04); 
      color:var(--text); 
      border:1px solid var(--border); 
      align-self:flex-start;
      white-space: pre-line;
    }
    .user-message { 
      background: linear-gradient(90deg,var(--accent),var(--accent-2)); 
      color:#021; 
      align-self:flex-end;
      font-weight:500;
    }

    .typing {
      display:inline-flex; 
      align-items:center;
      padding:11px 13px; 
      background:rgba(255,255,255,0.04); 
      border-radius:12px; 
      border:1px solid var(--border);
      align-self:flex-start;
    }
    .dots{display:flex; gap:4px}
    .dots span{display:inline-block; width:7px; height:7px; background:rgba(255,255,255,0.4); border-radius:50%; animation: blink 1.2s infinite}
    .dots span:nth-child(2){animation-delay:.2s} 
    .dots span:nth-child(3){animation-delay:.4s}
    @keyframes blink{0%,100%{opacity:.3; transform:scale(0.8)}50%{opacity:1; transform:scale(1.1)}}

    .chat-input { 
      display:flex; 
      gap:8px; 
      padding:12px; 
      border-top:1px solid var(--border); 
      background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent) 
    }
    .chat-input input { 
      flex:1; 
      padding:11px 14px; 
      border-radius:10px; 
      border:1px solid rgba(255,255,255,0.06); 
      background:rgba(255,255,255,0.02); 
      color:var(--text); 
      outline:none;
      font-size:14px;
      transition:border 0.2s;
    }
    .chat-input input:focus{border-color:var(--accent)}
    .chat-input button { 
      padding:11px 16px; 
      border-radius:10px; 
      border:0; 
      background:linear-gradient(90deg,var(--accent),var(--accent-2)); 
      color:#021; 
      font-weight:700; 
      cursor:pointer;
      transition:transform 0.2s;
      font-size:14px;
    }
    .chat-input button:hover{transform:scale(1.02)}
    .chat-input button:active{transform:scale(0.98)}

  </style>
</head>
<body>
  <!-- =========== HEADER / NAV =========== -->
  <header>
    <div class="container nav" role="banner">
      <div style="display:flex;align-items:center;gap:12px">
        <div class="brand" aria-label="AIDEX">
          <div class="logo" aria-hidden="true">AX</div>
          <div class="texts">
            <div class="name">AIDEX</div>
            <div class="tag">Trading ¬∑ Educaci√≥n ¬∑ Soporte</div>
          </div>
        </div>
      </div>

      <nav class="desktop" aria-label="Navegaci√≥n principal">
        <a href="#home">Inicio</a>
        <a href="#accounts">Tipos de cuenta</a>
        <a href="#instruments">Instrumentos</a>
        <a href="#platforms">Plataformas</a>
        <a href="#education">Educaci√≥n</a>
        <a href="#about">Acerca</a>
      </nav>

      <div style="display:flex;align-items:center;gap:10px">
        <a href="#open-account" class="cta" aria-label="Abrir cuenta demo">Abrir cuenta demo</a>
        <button class="hamburger" id="btnMenu" aria-expanded="false" aria-controls="mobileMenu" aria-label="Abrir men√∫">‚ò∞</button>
      </div>
    </div>

    <!-- Mobile menu simple -->
    <div class="container mobile-menu" id="mobileMenu" style="display:none" aria-hidden="true">
      <a href="#home">Inicio</a>
      <a href="#accounts">Tipos de cuenta</a>
      <a href="#instruments">Instrumentos</a>
      <a href="#platforms">Plataformas</a>
      <a href="#education">Educaci√≥n</a>
      <a href="#about">Acerca</a>
      <a href="#open-account" style="display:inline-block;margin-top:8px;padding:10px;background:linear-gradient(90deg,var(--accent),var(--accent-2));border-radius:8px;color:#021;font-weight:700">Abrir cuenta demo</a>
    </div>
  </header>

  <!-- =========== HERO =========== -->
  <main>
    <section id="home" class="hero">
      <div class="container hero-grid">
        <div>
          <h1 class="hero-title fade-up">Plataforma profesional para traders modernos</h1>
          <p class="hero-sub fade-up delay-1">Opera Forex, CFDs y criptomonedas con herramientas profesionales, recursos educativos y soporte para ayudarte a empezar con confianza.</p>

          <div class="hero-cta fade-up delay-2">
            <a href="#open-account" class="cta">Abrir cuenta demo</a>
            <a href="#education" class="pill">Ver recursos gratuitos</a>
          </div>

          <div class="stat-row fade-up delay-2">
            <div class="stat">+200 Instrumentos</div>
            <div class="stat">Soporte 24/5</div>
            <div class="stat">MT4 / MT5</div>
          </div>
        </div>

        <div class="hero-card fade-up" aria-hidden="false">
          <img class="hero-image" src="https://images.unsplash.com/photo-1559526324-593bc073d938?q=80&w=1600&auto=format&fit=crop&s=0" alt="Gr√°fica de trading">
          <div style="padding:16px;color:var(--muted);font-size:14px">
            <div class="small muted">Mercado financiero global</div>
            <div style="font-weight:700;margin-top:6px">Toma decisiones con datos y herramientas en tiempo real</div>
          </div>
        </div>
      </div>
    </section>

    <!-- =========== Tipos de cuenta =========== -->
    <section id="accounts">
      <div class="container">
        <div class="section-title">
          <h2>Tipos de cuenta</h2>
          <div class="muted small">Elige seg√∫n tu nivel y capital</div>
        </div>

        <div class="cards">
          <div class="card fade-up">
            <h3>Micro</h3>
            <p class="muted">Dep√≥sito m√≠nimo: $5 ‚Ä¢ Apalancamiento: 1:30</p>
            <p class="small muted" style="margin-top:12px">Cuenta para principiantes, spreads reducidos y lotes peque√±os.</p>
            <div style="margin-top:14px"><a class="pill" href="#open-account">Abrir demo</a></div>
          </div>

          <div class="card fade-up">
            <h3>Est√°ndar</h3>
            <p class="muted">Dep√≥sito m√≠nimo: $100 ‚Ä¢ Apalancamiento: 1:100</p>
            <p class="small muted" style="margin-top:12px">Para traders en crecimiento que requieren m√°s flexibilidad.</p>
            <div style="margin-top:14px"><a class="pill" href="#open-account">Abrir demo</a></div>
          </div>

          <div class="card fade-up">
            <h3>Profesional</h3>
            <p class="muted">Dep√≥sito m√≠nimo: $1000 ‚Ä¢ Apalancamiento: 1:200</p>
            <p class="small muted" style="margin-top:12px">Spreads m√°s bajos y soporte premium.</p>
            <div style="margin-top:14px"><a class="pill" href="#open-account">Abrir demo</a></div>
          </div>
        </div>
      </div>
    </section>

    <!-- =========== Instrumentos =========== -->
    <section id="instruments" style="background:linear-gradient(180deg,transparent, rgba(255,255,255,0.01))">
      <div class="container">
        <div class="section-title">
          <h2>Instrumentos financieros</h2>
          <div class="muted small">Diversifica tu portafolio</div>
        </div>

        <div class="platforms-grid" style="margin-bottom:12px">
          <div class="platform fade-up"><strong>Forex</strong><div class="muted small">Pares principales y ex√≥ticos</div></div>
          <div class="platform fade-up"><strong>CFDs</strong><div class="muted small">Acciones, √≠ndices y ETFs</div></div>
          <div class="platform fade-up"><strong>Criptomonedas</strong><div class="muted small">BTC, ETH y m√°s</div></div>
          <div class="platform fade-up"><strong>Metales</strong><div class="muted small">Oro, Plata</div></div>
        </div>
      </div>
    </section>

    <!-- =========== Plataformas =========== -->
    <section id="platforms">
      <div class="container">
        <div class="section-title">
          <h2>Plataformas</h2>
          <div class="muted small">Escoge c√≥mo operar</div>
        </div>

        <div class="platforms-grid">
          <div class="platform fade-up"><h3>MetaTrader 4</h3><p class="muted small">Indicadores y EA compatibles</p><div style="margin-top:10px"><a class="pill">Descargar</a></div></div>
          <div class="platform fade-up"><h3>MetaTrader 5</h3><p class="muted small">Herramientas avanzadas y m√°s mercados</p><div style="margin-top:10px"><a class="pill">Descargar</a></div></div>
          <div class="platform fade-up"><h3>WebTrader</h3><p class="muted small">Opera desde el navegador</p><div style="margin-top:10px"><a class="pill">Abrir</a></div></div>
          <div class="platform fade-up"><h3>App m√≥vil</h3><p class="muted small">iOS y Android</p><div style="margin-top:10px"><a class="pill">Descargar</a></div></div>
        </div>
      </div>
    </section>

    <!-- =========== Educaci√≥n =========== -->
    <section id="education" style="background:linear-gradient(180deg, transparent, rgba(255,255,255,0.01))">
      <div class="container">
        <div class="section-title">
          <h2>Recursos educativos</h2>
          <div class="muted small">Gu√≠as, webinars y herramientas</div>
        </div>

        <div class="resources">
          <div class="resource fade-up"><strong>Gu√≠a para principiantes</strong><div class="muted small">Art√≠culo</div></div>
          <div class="resource fade-up"><strong>Webinar: An√°lisis t√©cnico</strong><div class="muted small">Grabaci√≥n</div></div>
          <div class="resource fade-up"><strong>Calendario econ√≥mico</strong><div class="muted small">Herramienta</div></div>
        </div>
      </div>
    </section>

    <!-- =========== Acerca =========== -->
    <section id="about">
      <div class="container" style="text-align:center; max-width:880px">
        <h2>Acerca de AIDEX</h2>
        <p class="muted small" style="margin-top:12px">
          AIDEX es una plataforma dise√±ada para facilitar el acceso a los mercados financieros.
          Combinamos tecnolog√≠a, educaci√≥n y soporte para que los traders (principiantes y avanzados) tomen decisiones informadas.
        </p>
      </div>
    </section>
  </main>

  <!-- =========== FOOTER =========== -->
  <footer>
    <div class="container footer-grid">
      <div>
        <div style="font-weight:700">AIDEX</div>
        <div class="muted small" style="margin-top:6px">Plataforma de trading y educaci√≥n</div>
      </div>

      <div style="display:flex;gap:24px;flex-wrap:wrap">
        <div>
          <div style="font-weight:700">Legal</div>
          <div class="muted small" style="margin-top:8px">Pol√≠tica de privacidad<br>T√©rminos y condiciones</div>
        </div>
        <div>
          <div style="font-weight:700">Soporte</div>
          <div class="muted small" style="margin-top:8px">Contacto<br>FAQ</div>
        </div>
      </div>

      <div>
        <div style="font-weight:700">S√≠guenos</div>
        <div class="socials" style="margin-top:8px">
          <a href="#" aria-label="Twitter">TW</a>
          <a href="#" aria-label="LinkedIn">IN</a>
          <a href="#" aria-label="Facebook">FB</a>
        </div>
      </div>
    </div>

    <div class="container" style="margin-top:18px;text-align:center;color:var(--muted);font-size:13px">
      ¬© <span id="year"></span> AIDEX. Todos los derechos reservados.
    </div>
  </footer>

  <!-- Floating CTA (mobile) -->
  <a href="#open-account" class="floating-cta" aria-hidden="true">Demo</a>
 <!-- =========================
       Chat emergente (burbuja + ventana)
       ========================= -->
  <!-- Burbuja flotante -->
  <div id="chat-bubble" role="button" aria-label="Abrir chat de soporte">üí¨</div>

  <!-- Caja de chat -->
  <div id="chat-box" class="hidden" role="dialog" aria-label="Asistente IA">
    <div class="chat-header">
      <div class="title">
        <span>ü§ñ</span>
        <span>Asistente AIDEX</span>
      </div>
      <button id="close-chat" aria-label="Cerrar chat">‚úï</button>
    </div>

    <div id="chat-body">
      <!-- Mensaje inicial -->
      <div class="bot-message">üëã ¬°Hola! Soy tu asistente de AIDEX.

üéØ Puedo ayudarte con:
- Preguntas sobre trading e inversiones
- Historia y conceptos del mercado
- Calculadora (sumas, restas, %, conversiones)
- Informaci√≥n de criptomonedas
- Estrategias de inversi√≥n

üí° Ejemplos:
"¬øQu√© es el trading?" / "Calcula 2500 * 15%" / "Convierte 100 USD a EUR" / "¬øCu√°ndo debo invertir?"

¬øEn qu√© puedo ayudarte?</div>
    </div>

    <div class="chat-input" role="group" aria-label="Entrada de chat">
      <input type="text" id="user-input" placeholder="Escribe tu pregunta..." aria-label="Escribe tu pregunta" />
      <button id="send-btn" aria-label="Enviar">Enviar</button>
    </div>
  </div>

  <!-- =========================
       Scripts
       ========================= -->
  <script>
    /* ====== Variables DOM ====== */
    const yearEl = document.getElementById('year');
    const btn = document.getElementById('btnMenu');
    const mobileMenu = document.getElementById('mobileMenu');

    yearEl.textContent = new Date().getFullYear();

    if (btn) {
      btn.addEventListener('click', () => {
        const opened = mobileMenu.style.display === 'block';
        mobileMenu.style.display = opened ? 'none' : 'block';
        btn.setAttribute('aria-expanded', String(!opened));
        mobileMenu.setAttribute('aria-hidden', String(opened));
      });
    }

    function revealOnScroll(){
      const items = document.querySelectorAll('.fade-up');
      const windowH = window.innerHeight;
      items.forEach(i => {
        const rect = i.getBoundingClientRect();
        if (rect.top < windowH - 60) i.style.animationPlayState = 'running';
      });
    }
    window.addEventListener('scroll', revealOnScroll);
    window.addEventListener('load', revealOnScroll);

    /* ====== CHAT L√ìGICA ====== */
    const chatBubble = document.getElementById('chat-bubble');
    const chatBox = document.getElementById('chat-box');
    const closeChat = document.getElementById('close-chat');
    const sendBtn = document.getElementById('send-btn');
    const userInput = document.getElementById('user-input');
    const chatBody = document.getElementById('chat-body');

    let conversationHistory = [];

    chatBubble.addEventListener('click', () => {
      chatBox.classList.remove('hidden');
      chatBubble.style.display = 'none';
      userInput.focus();
    });

    closeChat.addEventListener('click', () => {
      chatBox.classList.add('hidden');
      chatBubble.style.display = 'flex';
    });

    sendBtn.addEventListener('click', sendMessage);
    userInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') sendMessage();
    });

    async function sendMessage() {
      const text = userInput.value.trim();
      if (!text) return;

      addMessage(text, 'user');
      userInput.value = '';
      conversationHistory.push({ role: 'user', content: text });
      showTyping();

      try {
        const response = await getBotResponse(text);
        hideTyping();
        addMessage(response, 'bot');
        conversationHistory.push({ role: 'assistant', content: response });
      } catch (error) {
        hideTyping();
        addMessage('Error al procesar tu mensaje. Intenta nuevamente.', 'bot');
        console.error('Error:', error);
      }
    }

    function addMessage(text, type) {
      const messageDiv = document.createElement('div');
      messageDiv.className = type === 'user' ? 'user-message' : 'bot-message';
      messageDiv.textContent = text;
      chatBody.appendChild(messageDiv);
      chatBody.scrollTop = chatBody.scrollHeight;
    }

    function showTyping() {
      const typingDiv = document.createElement('div');
      typingDiv.className = 'typing';
      typingDiv.id = 'typing-indicator';
      typingDiv.innerHTML = '<div class="dots"><span></span><span></span><span></span></div>';
      chatBody.appendChild(typingDiv);
      chatBody.scrollTop = chatBody.scrollHeight;
    }

    function hideTyping() {
      const typing = document.getElementById('typing-indicator');
      if (typing) typing.remove();
    }

    // ============================================
    // SISTEMA DE RESPUESTAS COMPLETO
    // ============================================
    async function getBotResponse(userMessage) {
      await new Promise(resolve => setTimeout(resolve, 800));
      
      const msg = userMessage.toLowerCase();

      // ============================================
      // CALCULADORA
      // ============================================
      
      // Operaciones matem√°ticas b√°sicas
      if (msg.match(/calcula|calcular|cu√°nto es|cuanto es|\+|\-|\*|\/|x|√∑/)) {
        return calcular(msg);
      }

      // Conversi√≥n de monedas
      if (msg.match(/convierte|convertir|convert|cambio|de .* a|usd|eur|gbp|jpy|cad|aud|chf|mxn|pen|cop|ars|brl/i)) {
        return convertirMoneda(msg);
      }

      // ============================================
      // TRADING - CONCEPTOS B√ÅSICOS
      // ============================================
      
      if (msg.match(/qu√© es trading|que es trading|trading es|definici√≥n de trading/i)) {
        return 'üìä **¬øQu√© es el Trading?**\n\nEl trading es la compra y venta de activos financieros (acciones, divisas, criptos, etc.) con el objetivo de obtener ganancias aprovechando las fluctuaciones de precios.\n\nüîë **Tipos principales:**\n‚Ä¢ Day Trading: operaciones en el mismo d√≠a\n‚Ä¢ Swing Trading: d√≠as o semanas\n‚Ä¢ Scalping: segundos o minutos\n‚Ä¢ Position Trading: meses o a√±os\n\nEn AIDEX ofrecemos todas las herramientas para cualquier estilo. ¬øQuieres saber m√°s sobre alguno?';
      }

      // Historia del trading
      if (msg.match(/historia del trading|c√≥mo empez√≥|como empezo|origen del trading|naci√≥ el trading|nacio el trading/i)) {
        return 'üìú **Historia del Trading**\n\nüèõÔ∏è **Or√≠genes (Siglo XVII)**\n‚Ä¢ 1602: Primera bolsa de valores en √Åmsterdam\n‚Ä¢ Se comerciaban acciones de la Compa√±√≠a de las Indias\n\nüìà **Evoluci√≥n:**\n‚Ä¢ 1792: Fundaci√≥n de NYSE (New York Stock Exchange)\n‚Ä¢ 1971: Nace NASDAQ (primera bolsa electr√≥nica)\n‚Ä¢ 1990s: Internet democratiza el trading\n‚Ä¢ 2000s: Trading algor√≠tmico\n‚Ä¢ 2010s: Trading m√≥vil y criptomonedas\n‚Ä¢ 2020s: Trading social y IA\n\nüöÄ Hoy cualquiera puede ser trader desde su celular. ¬°Como en AIDEX!';
      }

      // Cu√°ndo invertir
      if (msg.match(/cu√°ndo invertir|cuando invertir|mejor momento|cu√°ndo comprar|cuando comprar|hora de invertir/i)) {
        return '‚è∞ **¬øCu√°ndo invertir?**\n\n‚úÖ **El mejor momento es:**\n‚Ä¢ Cuando tengas conocimiento b√°sico\n‚Ä¢ Despu√©s de practicar en demo\n‚Ä¢ Con capital que puedas perder\n‚Ä¢ Con un plan de trading claro\n\nüìÖ **Momentos del mercado:**\n‚Ä¢ Apertura de sesiones (mayor volatilidad)\n‚Ä¢ Publicaci√≥n de datos econ√≥micos\n‚Ä¢ Anuncios de bancos centrales\n\n‚ö†Ô∏è **NUNCA inviertas:**\n‚Ä¢ Con dinero prestado\n‚Ä¢ Sin educarte primero\n‚Ä¢ Por presi√≥n o FOMO\n‚Ä¢ Todo tu capital en una operaci√≥n\n\nüí° Tip: Empieza con cuenta demo en AIDEX. ¬øTe ayudo a abrirla?';
      }

      // Mejores opciones de inversi√≥n
      if (msg.match(/mejores opciones|d√≥nde invertir|donde invertir|mejores inversiones|qu√© invertir|que invertir|recomendaciones de inversi√≥n/i)) {
        return 'üíé **Mejores opciones de inversi√≥n 2024-2025**\n\nüìä **Por tipo de activo:**\n\n1Ô∏è‚É£ **Forex** (divisas)\n‚Ä¢ EUR/USD, GBP/USD\n‚Ä¢ Alta liquidez, opera 24/5\n\n2Ô∏è‚É£ **Acciones**\n‚Ä¢ Tech: Apple, Microsoft, NVIDIA\n‚Ä¢ IA: empresas de inteligencia artificial\n\n3Ô∏è‚É£ **Criptomonedas**\n‚Ä¢ Bitcoin, Ethereum\n‚Ä¢ Alta volatilidad = oportunidades\n\n4Ô∏è‚É£ **√çndices**\n‚Ä¢ S&P 500, NASDAQ\n‚Ä¢ Menor riesgo (diversificaci√≥n)\n\n5Ô∏è‚É£ **Materias primas**\n‚Ä¢ Oro (refugio seguro)\n‚Ä¢ Petr√≥leo (energ√≠a)\n\n‚ö†Ô∏è La mejor opci√≥n depende de TU perfil de riesgo. ¬øQuieres un test de perfil?';
      }

      // Tiempo de evaluaci√≥n
      if (msg.match(/cu√°nto tiempo|cuanto tiempo|tiempo de|evaluar|evaluaci√≥n|an√°lisis de|duraci√≥n/i) && msg.match(/compra|venta|acci√≥n|operaci√≥n/i)) {
        return '‚è±Ô∏è **Tiempo de evaluaci√≥n de operaciones**\n\nüìä **Depende del estilo:**\n\n‚ö° **Scalping**: 1-5 minutos\n‚Ä¢ An√°lisis t√©cnico r√°pido\n‚Ä¢ Decisiones instant√°neas\n\nüìÖ **Day Trading**: 15min - 4 horas\n‚Ä¢ An√°lisis intrad√≠a\n‚Ä¢ Cierra antes de fin de d√≠a\n\nüìà **Swing Trading**: 2-7 d√≠as\n‚Ä¢ An√°lisis t√©cnico + fundamental\n‚Ä¢ Espera movimientos m√°s grandes\n\nüìä **Position Trading**: Semanas-meses\n‚Ä¢ An√°lisis fundamental profundo\n‚Ä¢ Tendencias de largo plazo\n\nüí° **Regla de oro**: NUNCA decidas por impulso. Usa siempre an√°lisis previo. ¬øQuieres aprender an√°lisis t√©cnico?';
      }

      // ============================================
      // CRIPTOMONEDAS
      // ============================================
      
      if (msg.match(/qu√© son las criptos|que son las criptos|criptomonedas son|bitcoin es|crypto/i)) {
        return 'üíé **¬øQu√© son las Criptomonedas?**\n\nSon monedas digitales descentralizadas que usan criptograf√≠a para seguridad.\n\nüîë **Caracter√≠sticas:**\n‚Ä¢ No controladas por gobiernos\n‚Ä¢ Blockchain (registro p√∫blico)\n‚Ä¢ Transacciones peer-to-peer\n‚Ä¢ Limitadas en cantidad (escasez)\n\nüí∞ **Principales criptos:**\n‚Ä¢ Bitcoin (BTC): "Oro digital"\n‚Ä¢ Ethereum (ETH): Contratos inteligentes\n‚Ä¢ Ripple (XRP): Pagos bancarios\n‚Ä¢ Litecoin (LTC): "Plata digital"\n\nüìä En AIDEX puedes tradear las principales criptos con apalancamiento. ¬øQuieres saber c√≥mo?';
      }

      // Qui√©n cre√≥ Bitcoin
      if (msg.match(/qui√©n cre√≥ bitcoin|quien creo bitcoin|satoshi nakamoto|creador de bitcoin|due√±o de bitcoin/i)) {
        return 'üë§ **Creador de Bitcoin: Satoshi Nakamoto**\n\nüîç **El misterio:**\n‚Ä¢ Nombre: Satoshi Nakamoto (seud√≥nimo)\n‚Ä¢ Identidad: DESCONOCIDA hasta hoy\n‚Ä¢ Public√≥ el whitepaper en 2008\n‚Ä¢ Min√≥ el primer bloque en 2009\n\nüí∞ **Su fortuna:**\n‚Ä¢ Posee ~1 mill√≥n de BTC\n‚Ä¢ Valor: +$40,000 millones USD\n‚Ä¢ NUNCA ha movido sus bitcoins\n\n‚ùì **Teor√≠as sobre su identidad:**\n‚Ä¢ Un genio programador\n‚Ä¢ Un grupo de desarrolladores\n‚Ä¢ Agencia gubernamental (menos probable)\n\nüéØ Su legado: revolucion√≥ las finanzas globales. ¬øCurioso sobre blockchain?';
      }

      // Due√±o de Ethereum
      if (msg.match(/qui√©n cre√≥ ethereum|quien creo ethereum|vitalik|buterin|due√±o de ethereum|creador de ethereum/i)) {
        return 'üë®‚Äçüíª **Creador de Ethereum: Vitalik Buterin**\n\nüá∑üá∫üá®üá¶ **Biograf√≠a:**\n‚Ä¢ Nombre: Vitalik Buterin\n‚Ä¢ Nacimiento: 1994 (Rusia)\n‚Ä¢ Nacionalidad: Canadiense\n‚Ä¢ Cre√≥ Ethereum a los 19 a√±os (2013)\n\nüöÄ **Logros:**\n‚Ä¢ Whitepaper en 2013\n‚Ä¢ Lanzamiento en 2015\n‚Ä¢ Contratos inteligentes revolucionarios\n‚Ä¢ Ethereum 2.0 (Proof of Stake)\n\nüí° **Visi√≥n:**\n"Un ordenador mundial descentralizado"\n\nüí∞ Su fortuna: Miles de millones en ETH. Ethereum es la base de DeFi, NFTs y dApps. ¬øQuieres tradear ETH en AIDEX?';
      }

      // Otras criptos y sus creadores
      if (msg.match(/qui√©n cre√≥|quien creo|due√±o de|creador de/i) && msg.match(/ripple|xrp|litecoin|ltc|cardano|ada|solana|sol|bnb|binance/i)) {
        let crypto = '';
        let info = '';
        
        if (msg.match(/ripple|xrp/i)) {
          crypto = 'Ripple (XRP)';
          info = 'üë• **Creadores: Chris Larsen y Jed McCaleb**\n\nüè¶ Fundaci√≥n: 2012\nüéØ Objetivo: Pagos bancarios internacionales instant√°neos\nüíº Empresa: Ripple Labs\n‚ö° Velocidad: 3-5 segundos por transacci√≥n\n\nüî• Dato: Demandado por SEC en 2020, gan√≥ parcialmente en 2023.';
        } else if (msg.match(/litecoin|ltc/i)) {
          crypto = 'Litecoin (LTC)';
          info = 'üë®‚Äçüíº **Creador: Charlie Lee**\n\nüìÖ Fundaci√≥n: 2011\nüí° Concepto: "Plata digital" (Bitcoin es oro)\n‚ö° Velocidad: 4x m√°s r√°pido que Bitcoin\nüîÑ Bloques cada 2.5 minutos\n\nüíé Muy usado para transacciones diarias.';
        } else if (msg.match(/cardano|ada/i)) {
          crypto = 'Cardano (ADA)';
          info = 'üéì **Creador: Charles Hoskinson**\n\nüìÖ Fundaci√≥n: 2017\nüß™ Enfoque: Investigaci√≥n acad√©mica\nüî¨ Primera blockchain con peer-review\nüå± Proof of Stake desde el inicio\n\nüéØ Visi√≥n: Blockchain sostenible y escalable.';
        } else if (msg.match(/solana|sol/i)) {
          crypto = 'Solana (SOL)';
          info = '‚ö° **Creador: Anatoly Yakovenko**\n\nüìÖ Fundaci√≥n: 2020\nüöÄ La blockchain M√ÅS R√ÅPIDA\n‚è±Ô∏è 65,000 transacciones/segundo\nüí∞ Tarifas: menos de $0.01\n\nüéÆ Popular en NFTs y Gaming.';
        } else if (msg.match(/bnb|binance/i)) {
          crypto = 'Binance Coin (BNB)';
          info = 'üè¢ **Creador: Changpeng Zhao (CZ)**\n\nüìÖ Fundaci√≥n: 2017\nüè¶ Exchange: Binance (el m√°s grande)\nüî• Quema de tokens trimestral\nüí≥ Usos: Trading fees, pagos, DeFi\n\nüíé De $0.10 a $600+ en su pico.';
        }
        
        return `üí∞ **${crypto}**\n\n${info}\n\nüìä Puedes tradear esta y otras criptos en AIDEX con apalancamiento. ¬øTe interesa?`;
      }

      // ============================================
      // FOREX Y DIVISAS
      // ============================================
      
      if (msg.match(/forex|divisas|pares de|EUR\/USD|GBP\/USD|par mayor/i)) {
        return 'üí± **Forex - Mercado de Divisas**\n\nüåç **El mercado m√°s grande del mundo**\n‚Ä¢ Volumen diario: $6.6 trillones\n‚Ä¢ Opera 24h, 5 d√≠as/semana\n‚Ä¢ Mayor liquidez global\n\nüìä **Pares Principales (Majors):**\n‚Ä¢ EUR/USD (Euro/D√≥lar) - El m√°s operado\n‚Ä¢ GBP/USD (Libra/D√≥lar) - "Cable"\n‚Ä¢ USD/JPY (D√≥lar/Yen) - "Ninja"\n‚Ä¢ USD/CHF (D√≥lar/Franco)\n\nüìà **Pares Menores:**\n‚Ä¢ EUR/GBP, EUR/JPY, GBP/JPY\n\nüå∂Ô∏è **Ex√≥ticos:**\n‚Ä¢ USD/MXN, USD/TRY, USD/ZAR\n\nüí° En AIDEX: +50 pares con spreads desde 0.1 pips. ¬øQuieres estrategias de Forex?';
      }

      // ============================================
      // AN√ÅLISIS T√âCNICO
      // ============================================
      
      if (msg.match(/an√°lisis t√©cnico|analisis tecnico|indicadores|RSI|MACD|medias m√≥viles|fibonacci/i)) {
        return 'üìä **An√°lisis T√©cnico**\n\nEstudio de gr√°ficos y patrones para predecir movimientos.\n\nüîß **Indicadores principales:**\n\n1Ô∏è‚É£ **Medias M√≥viles (MA)**\n‚Ä¢ Identifica tendencias\n‚Ä¢ MA 50, MA 200 (m√°s usadas)\n\n2Ô∏è‚É£ **RSI (Relative Strength Index)**\n‚Ä¢ Mide sobrecompra/sobreventa\n‚Ä¢ >70 = sobrecompra, <30 = sobreventa\n\n3Ô∏è‚É£ **MACD**\n‚Ä¢ Momentum y tendencia\n‚Ä¢ Cruces = se√±ales de entrada/salida\n\n4Ô∏è‚É£ **Fibonacci**\n‚Ä¢ Niveles de retroceso\n‚Ä¢ 38.2%, 50%, 61.8%\n\n5Ô∏è‚É£ **Soportes y Resistencias**\n‚Ä¢ Zonas clave de precio\n\nüìö ¬øQuieres aprender a usar estos indicadores en MT4/MT5?';
      }

      // ============================================
      // GESTI√ìN DE RIESGO
      // ============================================
      
      if (msg.match(/gesti√≥n de riesgo|gestion de riesgo|stop loss|take profit|riesgo recompensa|money management/i)) {
        return 'üõ°Ô∏è **Gesti√≥n de Riesgo - LO M√ÅS IMPORTANTE**\n\n‚ö†Ô∏è **Reglas de oro:**\n\n1Ô∏è‚É£ **Regla del 2%**\n‚Ä¢ NUNCA arriesgues m√°s del 2% de tu capital por operaci√≥n\n‚Ä¢ Ejemplo: $1000 ‚Üí m√°ximo $20 de riesgo\n\n2Ô∏è‚É£ **Stop Loss obligatorio**\n‚Ä¢ SIEMPRE √∫salo\n‚Ä¢ Define ANTES de entrar\n\n3Ô∏è‚É£ **Ratio Riesgo/Beneficio**\n‚Ä¢ M√≠nimo 1:2 (arriesgas $1 para ganar $2)\n‚Ä¢ Ideal 1:3 o m√°s\n\n4Ô∏è‚É£ **Diversificaci√≥n**\n‚Ä¢ No pongas todo en un activo\n‚Ä¢ M√°ximo 3-5 operaciones simult√°neas\n\n5Ô∏è‚É£ **Tama√±o de posici√≥n**\n‚Ä¢ Usa calculadoras de lote\n‚Ä¢ Respeta tu plan de trading\n\nüí° ¬øQuiero calcularte el tama√±o de lote ideal?';
      }

      // ============================================
      // PLATAFORMAS Y CUENTAS
      // ============================================
      
      if (msg.match(/metatrader|mt4|mt5|plataforma|webtrader|app/i)) {
        return 'üìä **Plataformas de Trading en AIDEX**\n\nüñ•Ô∏è **MetaTrader 4 (MT4)**\n‚Ä¢ La m√°s popular del mundo\n‚Ä¢ Expert Advisors (robots)\n‚Ä¢ +2000 indicadores\n‚Ä¢ Windows, Mac, Linux\n\nüöÄ **MetaTrader 5 (MT5)**\n‚Ä¢ Versi√≥n mejorada\n‚Ä¢ M√°s mercados (acciones, futuros)\n‚Ä¢ 21 timeframes (vs 9 en MT4)\n‚Ä¢ An√°lisis econ√≥mico integrado\n\nüåê **WebTrader**\n‚Ä¢ Sin descargas\n‚Ä¢ Desde cualquier navegador\n‚Ä¢ Acceso instant√°neo\n\nüì± **App M√≥vil**\n‚Ä¢ iOS y Android\n‚Ä¢ Notificaciones en tiempo real\n‚Ä¢ Opera desde cualquier lugar\n\nüí° ¬øCu√°l te gustar√≠a probar primero?';
      }

      if (msg.match(/cuenta|abrir|demo|micro|est√°ndar|estandar|profesional|tipo de cuenta/i)) {
        return 'üíº **Cuentas en AIDEX**\n\nüéÆ **CUENTA DEMO** (¬°GRATIS!)\n‚Ä¢ $10,000 virtuales\n‚Ä¢ Sin riesgo\n‚Ä¢ Practica ilimitada\n‚Ä¢ Todas las funciones reales\n\nüí∞ **MICRO** - Desde $5\n‚Ä¢ Apalancamiento: 1:30\n‚Ä¢ Lotes: 0.01 - 0.1\n‚Ä¢ Ideal: Principiantes\n‚Ä¢ Spreads: est√°ndar\n\nüíº **EST√ÅNDAR** - Desde $100\n‚Ä¢ Apalancamiento: 1:100\n‚Ä¢ Lotes: 0.01 - 1.0\n‚Ä¢ Ideal: Intermedios\n‚Ä¢ Spreads: reducidos\n\nüëî **PROFESIONAL** - Desde $1,000\n‚Ä¢ Apalancamiento: 1:200\n‚Ä¢ Lotes: 0.01 - 10.0\n‚Ä¢ Ideal: Expertos\n‚Ä¢ Spreads: premium\n‚Ä¢ Soporte VIP\n\n‚úÖ Recomendaci√≥n: Empieza con DEMO. ¬øTe ayudo a abrirla?';
      }

      // ============================================
      // ESTRATEGIAS
      // ============================================
      
      if (msg.match(/estrategia|estrategias|c√≥mo operar|como operar|t√©cnica|t√°ctica/i)) {
        return 'üéØ **Estrategias de Trading Populares**\n\nüìà **1. Seguimiento de Tendencia**\n‚Ä¢ "La tendencia es tu amiga"\n‚Ä¢ Usa medias m√≥viles\n‚Ä¢ Opera a favor de la tendencia\n\n‚ö° **2. Breakout (Ruptura)**\n‚Ä¢ Identifica soportes/resistencias\n‚Ä¢ Entra cuando se rompen\n‚Ä¢ Alto potencial de ganancia\n\nüîÑ **3. Range Trading**\n‚Ä¢ Opera entre soporte y resistencia\n‚Ä¢ Compra en soporte, vende en resistencia\n‚Ä¢ Mercados laterales\n\nüì∞ **4. Trading de Noticias**\n‚Ä¢ Opera eventos econ√≥micos\n‚Ä¢ NFP, tasas de inter√©s, PIB\n‚Ä¢ Alta volatilidad\n\nü§ñ **5. Scalping**\n‚Ä¢ M√∫ltiples operaciones peque√±as\n‚Ä¢ Ganancias de 5-10 pips\n‚Ä¢ Requiere disciplina\n\nüí° ¬øQuieres que te explique alguna en detalle?';
      }

      // ============================================
      // ERRORES COMUNES
      // ============================================
      
      if (msg.match(/errores|error|equivocaci√≥n|equivocacion|no hacer|evitar/i) && msg.match(/trading|trader|inversi√≥n|inversion/i)) {
        return '‚ùå **Errores COMUNES en Trading (ev√≠talos)**\n\n1Ô∏è‚É£ **Operar sin Stop Loss**\n‚Ä¢ Error #1 que destruye cuentas\n‚Ä¢ SIEMPRE usa stop loss\n\n2Ô∏è‚É£ **Overtrading (operar mucho)**\n‚Ä¢ Calidad > Cantidad\n‚Ä¢ Paciencia es clave\n\n3Ô∏è‚É£ **Arriesgar mucho por operaci√≥n**\n‚Ä¢ No m√°s del 2% por trade\n‚Ä¢ El capital es lo primero\n\n4Ô∏è‚É£ **Operar por emociones**\n‚Ä¢ Miedo y codicia = enemigos\n‚Ä¢ Sigue tu plan siempre\n\n5Ô∏è‚É£ **No llevar registro**\n‚Ä¢ Bit√°cora de trading obligatoria\n‚Ä¢ Aprende de tus errores\n\n6Ô∏è‚É£ **No educarse**\n‚Ä¢ El conocimiento es poder\n‚Ä¢ Nunca dejes de aprender\n\n7Ô∏è‚É£ **Perseguir p√©rdidas**\n‚Ä¢ Aceptar p√©rdidas es parte del juego\n‚Ä¢ No te vengues del mercado\n\nüí° ¬øCometes alguno de estos?';
      }

      // ============================================
      // IMPUESTOS Y LEGAL
      // ============================================
      
      if (msg.match(/impuesto|impuestos|declarar|tributar|legal|ilegal/i)) {
        return 'üìã **Aspectos Legales y Fiscales del Trading**\n\n‚öñÔ∏è **Legalidad:**\n‚Ä¢ El trading es 100% LEGAL en casi todos los pa√≠ses\n‚Ä¢ Debes usar brokers regulados (como AIDEX)\n\nüí∞ **Impuestos:**\n‚Ä¢ S√ç debes declarar ganancias\n‚Ä¢ Var√≠a por pa√≠s:\n  - USA: Capital gains tax\n  - UE: Seg√∫n cada pa√≠s (15-30%)\n  - Latinoam√©rica: Variable\n\nüìä **¬øQu√© declarar?**\n‚Ä¢ Ganancias netas (ganancias - p√©rdidas)\n‚Ä¢ Solo cuando retiras a tu banco\n‚Ä¢ Conserva todos tus registros\n\n‚ö†Ô∏è **Importante:**\n‚Ä¢ Consulta un contador especializado\n‚Ä¢ Las leyes var√≠an por pa√≠s\n‚Ä¢ La evasi√≥n fiscal tiene consecuencias graves\n\nüí° Consejo: Guarda historial de todas tus operaciones en AIDEX.';
      }

      // ============================================
      // EDUCACI√ìN
      // ============================================
      
      if (msg.match(/aprend|curso|educa|estudi|gu√≠a|libro|webinar|material/i)) {
        return 'üìö **Recursos Educativos - AIDEX**\n\nüéì **Cursos GRATUITOS:**\n\n1Ô∏è‚É£ **Principiantes**\n‚Ä¢ ¬øQu√© es el trading?\n‚Ä¢ Conceptos b√°sicos\n‚Ä¢ Tu primera operaci√≥n\n\n2Ô∏è‚É£ **Intermedio**\n‚Ä¢ An√°lisis t√©cnico\n‚Ä¢ Indicadores principales\n‚Ä¢ Gesti√≥n de riesgo\n\n3Ô∏è‚É£ **Avanzado**\n‚Ä¢ Estrategias complejas\n‚Ä¢ Psicolog√≠a del trading\n‚Ä¢ Trading algor√≠tmico\n\nüì∫ **Webinars en Vivo:**\n‚Ä¢ Martes y Jueves 7pm\n‚Ä¢ An√°lisis de mercado\n‚Ä¢ Q&A con traders pro\n\nüìñ **Libros recomendados:**\n‚Ä¢ "Trading in the Zone" - Mark Douglas\n‚Ä¢ "An√°lisis T√©cnico" - Murphy\n‚Ä¢ "Reminiscencias" - Livermore\n\nüìÖ **Calendario Econ√≥mico:**\n‚Ä¢ Eventos que mueven mercados\n‚Ä¢ Alertas autom√°ticas\n\n¬øPor d√≥nde quieres empezar?';
      }

      // ============================================
      // PSICOLOG√çA
      // ============================================
      
      if (msg.match(/psicolog√≠a|psicologia|emociones|miedo|codicia|disciplina|mental/i)) {
        return 'üß† **Psicolog√≠a del Trading - 80% del √©xito**\n\nüò® **Emociones enemigas:**\n\n1Ô∏è‚É£ **MIEDO**\n‚Ä¢ Paraliza decisiones\n‚Ä¢ Te saca de buenas operaciones\n‚Ä¢ Soluci√≥n: Conf√≠a en tu an√°lisis\n\n2Ô∏è‚É£ **CODICIA**\n‚Ä¢ No tomar ganancias\n‚Ä¢ Arriesgar de m√°s\n‚Ä¢ Soluci√≥n: Sigue tu plan\n\n3Ô∏è‚É£ **VENGANZA**\n‚Ä¢ Operar tras una p√©rdida\n‚Ä¢ Decisiones impulsivas\n‚Ä¢ Soluci√≥n: Toma
          // Soluci√≥n: Toma un descanso
\n\n4Ô∏è‚É£ **EUFORIA**\n‚Ä¢ Exceso de confianza tras ganar\n‚Ä¢ Romper reglas de riesgo\n‚Ä¢ Soluci√≥n: Mant√©n humildad\n\n‚úÖ **C√≥mo desarrollar disciplina:**\n\nüìã **Plan de Trading escrito**\n‚Ä¢ Cu√°ndo entrar/salir\n‚Ä¢ Cu√°nto arriesgar\n‚Ä¢ Qu√© mercados operar\n\nüìä **Bit√°cora de operaciones**\n‚Ä¢ Registra TODAS tus operaciones\n‚Ä¢ Analiza patrones\n‚Ä¢ Aprende de errores\n\nüßò **Rutina pre-trading**\n‚Ä¢ Medita 5 minutos\n‚Ä¢ Revisa noticias\n‚Ä¢ Verifica plan del d√≠a\n\n‚è∏Ô∏è **Saber parar**\n‚Ä¢ Despu√©s de 2 p√©rdidas seguidas\n‚Ä¢ Si est√°s emocional\n‚Ä¢ Cuando no hay setups claros\n\nüí° "El mercado siempre estar√° ah√≠ ma√±ana". ¬øQuieres tips para controlar emociones?';
      }

      // ============================================
      // APALANCAMIENTO
      // ============================================
      
      if (msg.match(/apalancamiento|leverage|margen|margin|1:100|1:200/i)) {
        return '‚ö° **Apalancamiento - Arma de doble filo**\n\nüîç **¬øQu√© es?**\nOperar con m√°s capital del que tienes.\n\nüìä **Ejemplo:**\n‚Ä¢ Tienes: $100\n‚Ä¢ Apalancamiento 1:100\n‚Ä¢ Puedes operar: $10,000\n\n‚úÖ **Ventajas:**\n‚Ä¢ Mayores ganancias potenciales\n‚Ä¢ Menos capital inicial necesario\n‚Ä¢ M√°s oportunidades\n\n‚ö†Ô∏è **Riesgos:**\n‚Ä¢ TAMBI√âN amplifica p√©rdidas\n‚Ä¢ Puedes perder m√°s r√°pido\n‚Ä¢ Margin call si no hay fondos\n\nüéØ **Apalancamiento en AIDEX:**\n‚Ä¢ Micro: 1:30\n‚Ä¢ Est√°ndar: 1:100\n‚Ä¢ Profesional: 1:200\n\nüí° **Recomendaci√≥n para principiantes:**\n‚Ä¢ Usa BAJO apalancamiento (1:10 o 1:20)\n‚Ä¢ Prioriza gesti√≥n de riesgo\n‚Ä¢ Aumenta gradualmente con experiencia\n\n‚ùì ¬øQuieres calcular tu exposici√≥n con apalancamiento?';
      }

      // ============================================
      // BROKERS Y REGULACI√ìN
      // ============================================
      
      if (msg.match(/broker|br√≥ker|regulaci√≥n|regulacion|confiable|seguro|licencia|estafa/i)) {
        return 'üè¶ **C√≥mo elegir un Broker Confiable**\n\n‚úÖ **Se√±ales de broker SEGURO:**\n\n1Ô∏è‚É£ **Regulaci√≥n**\n‚Ä¢ FCA (UK)\n‚Ä¢ CySEC (Chipre)\n‚Ä¢ ASIC (Australia)\n‚Ä¢ SEC/CFTC (USA)\n\n2Ô∏è‚É£ **Segregaci√≥n de fondos**\n‚Ä¢ Tu dinero separado del broker\n‚Ä¢ Protecci√≥n en caso de quiebra\n\n3Ô∏è‚É£ **Transparencia**\n‚Ä¢ Spreads claros\n‚Ä¢ Sin comisiones ocultas\n‚Ä¢ Retiros r√°pidos\n\n4Ô∏è‚É£ **A√±os de experiencia**\n‚Ä¢ M√≠nimo 5 a√±os operando\n‚Ä¢ Buenas rese√±as\n\n5Ô∏è‚É£ **Soporte al cliente**\n‚Ä¢ Atenci√≥n 24/5 o 24/7\n‚Ä¢ M√∫ltiples idiomas\n\nüö© **Red Flags (HUIR):**\n‚Ä¢ Prometen ganancias garantizadas\n‚Ä¢ Piden dinero por "se√±ales VIP"\n‚Ä¢ No tienen regulaci√≥n\n‚Ä¢ Dificultan retiros\n‚Ä¢ Sede en para√≠sos fiscales\n\n‚úÖ **AIDEX cumple todos los est√°ndares:**\n‚Ä¢ Regulado internacionalmente\n‚Ä¢ Fondos segregados\n‚Ä¢ Retiros en 24-48h\n‚Ä¢ Soporte 24/5\n\n¬øTienes dudas sobre seguridad?';
      }

      // ============================================
      // HORARIOS DE MERCADO
      // ============================================
      
      if (msg.match(/horario|hora|sesi√≥n|sesion|abre|cierra|mercado|cuando opera/i)) {
        return 'üïê **Horarios de los Mercados Financieros**\n\nüåè **FOREX (24 horas, 5 d√≠as):**\n\n‚Ä¢ üá¶üá∫ Sidney: 5pm - 2am (EST)\n‚Ä¢ üáØüáµ Tokio: 7pm - 4am (EST)\n‚Ä¢ üá¨üáß Londres: 3am - 12pm (EST)\n‚Ä¢ üá∫üá∏ New York: 8am - 5pm (EST)\n\n‚ö° **Horarios de MAYOR volatilidad:**\n‚Ä¢ Londres + NY (8am-12pm EST) ‚Üê MEJOR\n‚Ä¢ Apertura de cualquier sesi√≥n\n\nüìà **ACCIONES:**\n‚Ä¢ NYSE: 9:30am - 4pm (EST)\n‚Ä¢ Pre-market: 4am - 9:30am\n‚Ä¢ After-hours: 4pm - 8pm\n\nüíé **CRIPTOMONEDAS:**\n‚Ä¢ 24/7 (incluye fines de semana)\n‚Ä¢ Mayor volumen: horario USA\n\nüèÜ **Mejores d√≠as para operar:**\n‚Ä¢ Martes, Mi√©rcoles, Jueves\n‚Ä¢ Evita: Lunes (consolidaci√≥n) y Viernes (cierre semanal)\n\nüí° En AIDEX puedes operar Forex 24/5. ¬øQu√© horario prefieres?';
      }

      // ============================================
      // T√âRMINOS T√âCNICOS
      // ============================================
      
      if (msg.match(/pip|spread|lote|lot|swap|comisi√≥n|comision/i)) {
        return 'üìñ **Glosario de Trading**\n\nüìç **PIP**\n‚Ä¢ Unidad m√≠nima de precio\n‚Ä¢ Ej: EUR/USD de 1.1000 a 1.1001 = 1 pip\n‚Ä¢ 4¬∫ decimal en pares mayores\n\nüìè **SPREAD**\n‚Ä¢ Diferencia entre compra (ASK) y venta (BID)\n‚Ä¢ Es el "costo" de operar\n‚Ä¢ Ejemplo: BID 1.1000 / ASK 1.1002 = 2 pips spread\n\nüì¶ **LOTE**\n‚Ä¢ Tama√±o de la operaci√≥n\n‚Ä¢ Lote est√°ndar = 100,000 unidades\n‚Ä¢ Mini lote = 10,000\n‚Ä¢ Micro lote = 1,000\n\nüí§ **SWAP**\n‚Ä¢ Inter√©s por mantener posici√≥n de un d√≠a a otro\n‚Ä¢ Puede ser positivo o negativo\n‚Ä¢ Depende de tasas de inter√©s\n\nüí∞ **COMISI√ìN**\n‚Ä¢ Tarifa por operaci√≥n\n‚Ä¢ AIDEX: sin comisiones en Forex\n‚Ä¢ Solo spreads\n\nüìä **MARGEN**\n‚Ä¢ Garant√≠a para mantener posici√≥n\n‚Ä¢ Ej: $100 margen para operar $10,000\n\n‚ö†Ô∏è **MARGIN CALL**\n‚Ä¢ Alerta: fondos insuficientes\n‚Ä¢ ¬°Agrega capital o cierra posiciones!\n\n¬øNecesitas explicaci√≥n de alg√∫n otro t√©rmino?';
      }

      // ============================================
      // COMPARACIONES Y VS
      // ============================================
      
      if (msg.match(/diferencia entre|vs|versus|mejor que|comparaci√≥n|comparacion/i)) {
        if (msg.match(/forex.*acciones|acciones.*forex|forex.*stocks|stocks.*forex/i)) {
          return '‚öîÔ∏è **FOREX vs ACCIONES**\n\nüí± **FOREX:**\n‚úÖ Opera 24/5\n‚úÖ Mayor liquidez\n‚úÖ Menos capital inicial\n‚úÖ Apalancamiento alto\n‚ùå Solo 28 pares principales\n\nüìà **ACCIONES:**\n‚úÖ Miles de opciones\n‚úÖ Dividendos\n‚úÖ M√°s f√°cil an√°lisis fundamental\n‚ùå Opera solo 6.5h/d√≠a\n‚ùå Menos apalancamiento\n‚ùå Mayor capital inicial\n\nüéØ **¬øCu√°l elegir?**\n‚Ä¢ Forex: Si quieres flexibilidad horaria\n‚Ä¢ Acciones: Si te gusta investigar empresas\n\nüí° En AIDEX puedes operar AMBOS. ¬øQuieres empezar?';
        }
        
        if (msg.match(/criptos.*forex|forex.*criptos|crypto.*forex|forex.*crypto/i)) {
          return '‚öîÔ∏è **FOREX vs CRIPTOMONEDAS**\n\nüí± **FOREX:**\n‚úÖ Menos volatilidad\n‚úÖ M√°s predecible\n‚úÖ Spreads bajos\n‚úÖ Alta liquidez\n‚ùå Movimientos peque√±os\n‚ùå Opera 24/5 (no fines de semana)\n\nüíé **CRIPTOS:**\n‚úÖ Opera 24/7 (incluye fines de semana)\n‚úÖ Alta volatilidad = grandes oportunidades\n‚úÖ Mercado en crecimiento\n‚ùå M√°s riesgo\n‚ùå Spreads m√°s altos\n‚ùå Menos predecible\n\nüéØ **Recomendaci√≥n:**\n‚Ä¢ Principiantes: Forex (m√°s estable)\n‚Ä¢ Experimentados: Criptos (mayor riesgo/recompensa)\n‚Ä¢ Ideal: Combinar ambos (diversificaci√≥n)\n\nüí° En AIDEX: ambos disponibles. ¬øCu√°l prefieres?';
        }
      }

      // ============================================
      // SALUDOS Y GENERALES
      // ============================================
      
      if (msg.match(/hola|hey|buenos|buenas|hi|hello/i)) {
        return 'üëã ¬°Hola! Bienvenido a AIDEX.\n\nü§ñ Soy tu asistente y puedo ayudarte con:\n\nüìä **Trading & Inversiones**\n‚Ä¢ Conceptos b√°sicos y avanzados\n‚Ä¢ Estrategias\n‚Ä¢ An√°lisis de mercado\n\nüßÆ **Calculadora**\n‚Ä¢ Operaciones matem√°ticas\n‚Ä¢ Conversi√≥n de monedas\n‚Ä¢ Porcentajes\n\nüí° **Ejemplos de preguntas:**\n‚Ä¢ "¬øQu√© es el trading?"\n‚Ä¢ "Mejores criptomonedas 2024"\n‚Ä¢ "Calcula 2500 * 15%"\n‚Ä¢ "Convierte 100 USD a EUR"\n‚Ä¢ "¬øCu√°ndo debo invertir?"\n\n¬øEn qu√© puedo ayudarte hoy? üòä';
      }

      if (msg.match(/gracias|thanks|thx|agradec/i)) {
        return '¬°De nada! üòä Es un placer ayudarte.\n\nüí° Recuerda:\n‚Ä¢ Practica primero en demo\n‚Ä¢ Gesti√≥n de riesgo SIEMPRE\n‚Ä¢ Educaci√≥n continua\n‚Ä¢ Trading responsable\n\nüöÄ ¬øHay algo m√°s en lo que pueda asistirte?\n\nSi est√°s listo, ¬°abre tu cuenta demo gratuita en AIDEX y empieza tu camino como trader!';
      }

      if (msg.match(/adi√≥s|adios|bye|chao|hasta luego/i)) {
        return 'üëã ¬°Hasta pronto!\n\nüéØ Antes de irte:\n‚Ä¢ Descarga MT4/MT5\n‚Ä¢ Abre tu cuenta demo\n‚Ä¢ √önete a nuestros webinars\n\nüí™ ¬°Mucho √©xito en tu journey como trader!\n\nVuelve cuando necesites ayuda. AIDEX est√° aqu√≠ para ti 24/5. üöÄ';
      }

      // ============================================
      // RESPUESTA GEN√âRICA
      // ============================================
      
      return `ü§î Interesante pregunta sobre "${userMessage}".\n\nPuedo ayudarte con:\n\nüìä **Trading & Mercados**\n‚Ä¢ Forex, Acciones, Criptos\n‚Ä¢ An√°lisis t√©cnico\n‚Ä¢ Estrategias\n‚Ä¢ Historia del trading\n\nüßÆ **Calculadora**\n‚Ä¢ Matem√°ticas b√°sicas\n‚Ä¢ Conversi√≥n de monedas\n‚Ä¢ Porcentajes\n\nüí° **Ejemplos:**\n"¬øQu√© es Forex?" / "Historia de Bitcoin" / "Calcula 500 + 300" / "Mejores inversiones"\n\n¬øPodr√≠as ser m√°s espec√≠fico? üòä`;
    }

    // ============================================
    // FUNCIONES DE CALCULADORA
    // ============================================
    
    function calcular(msg) {
      try {
        // Limpiar el mensaje
        let expresion = msg
          .replace(/calcula|calcular|cu√°nto es|cuanto es/gi, '')
          .replace(/x/g, '*')
          .replace(/√∑/g, '/')
          .trim();

        // Detectar porcentajes
        if (expresion.match(/(\d+\.?\d*)\s*%\s*de\s*(\d+\.?\d*)/i)) {
          const match = expresion.match(/(\d+\.?\d*)\s*%\s*de\s*(\d+\.?\d*)/i);
          const porcentaje = parseFloat(match[1]);
          const cantidad = parseFloat(match[2]);
          const resultado = (cantidad * porcentaje) / 100;
          return `üßÆ **C√°lculo de Porcentaje**\n\n${porcentaje}% de ${cantidad} = **${resultado.toFixed(2)}**\n\nüìä Tambi√©n:\n‚Ä¢ ${cantidad} + ${porcentaje}% = ${(cantidad + resultado).toFixed(2)}\n‚Ä¢ ${cantidad} - ${porcentaje}% = ${(cantidad - resultado).toFixed(2)}`;
        }

        // Evaluar expresi√≥n matem√°tica
        expresion = expresion.replace(/[^0-9+\-*/().\s]/g, '');
        
        if (!expresion) {
          return 'üßÆ **Calculadora AIDEX**\n\nüìù Puedes pedirme:\n‚Ä¢ Suma: "2500 + 1800"\n‚Ä¢ Resta: "5000 - 2300"\n‚Ä¢ Multiplicaci√≥n: "250 * 4"\n‚Ä¢ Divisi√≥n: "1000 / 8"\n‚Ä¢ Porcentajes: "15% de 2500"\n\n¬øQu√© quieres calcular?';
        }

        const resultado = eval(expresion);
        
        if (isNaN(resultado)) {
          return '‚ùå No pude calcular eso. \n\nEjemplos v√°lidos:\n‚Ä¢ "2500 + 1500"\n‚Ä¢ "100 * 25"\n‚Ä¢ "15% de 3000"';
        }

        return `üßÆ **Resultado del c√°lculo**\n\n${expresion} = **${resultado.toLocaleString('es-ES', {maximumFractionDigits: 2})}**\n\nüí° ¬øNecesitas otro c√°lculo?`;
      } catch (error) {
        return '‚ùå Error en el c√°lculo.\n\n‚úÖ Ejemplos correctos:\n‚Ä¢ "250 + 150"\n‚Ä¢ "1000 * 0.15"\n‚Ä¢ "20% de 5000"';
      }
    }

    function convertirMoneda(msg) {
      // Tasas de cambio aproximadas (actualizar peri√≥dicamente)
      const tasas = {
        'USD': 1,
        'EUR': 0.92,
        'GBP': 0.79,
        'JPY': 149.50,
        'CAD': 1.36,
        'AUD': 1.52,
        'CHF': 0.88,
        'MXN': 17.20,
        'PEN': 3.70,
        'COP': 3950,
        'ARS': 350,
        'BRL': 4.98,
        'CLP': 920
      };

      try {
        // Detectar patr√≥n: "convierte X USD a EUR" o "100 USD a EUR"
        const match = msg.match(/(\d+\.?\d*)\s*([A-Z]{3})\s*(?:a|to)\s*([A-Z]{3})/i);
        
        if (!match) {
          return 'üí± **Conversor de Monedas**\n\nüìù Formato:\n"Convierte 100 USD a EUR"\n"500 EUR a JPY"\n"1000 MXN a USD"\n\nüíµ **Monedas disponibles:**\nUSD, EUR, GBP, JPY, CAD, AUD, CHF, MXN, PEN, COP, ARS, BRL, CLP\n\n¬øQu√© conversi√≥n necesitas?';
        }

        const cantidad = parseFloat(match[1]);
        const desde = match[2].toUpperCase();
        const hacia = match[3].toUpperCase();

        if (!tasas[desde] || !tasas[hacia]) {
          return `‚ùå Moneda no disponible.\n\n‚úÖ Monedas soportadas:\nUSD, EUR, GBP, JPY, CAD, AUD, CHF, MXN, PEN, COP, ARS, BRL, CLP`;
        }

        // Convertir a USD primero, luego a la moneda destino
        const enUSD = cantidad / tasas[desde];
        const resultado = enUSD * tasas[hacia];

        return `üí± **Conversi√≥n de Moneda**\n\n${cantidad} ${desde} = **${resultado.toLocaleString('es-ES', {minimumFractionDigits: 2, maximumFractionDigits: 2})} ${hacia}**\n\nüìä Tasa: 1 ${desde} = ${(tasas[hacia]/tasas[desde]).toFixed(4)} ${hacia}\n\n‚ö†Ô∏è *Tasas aproximadas, pueden variar*\n\nüí° ¬øOtra conversi√≥n?`;
      } catch (error) {
        return '‚ùå Error en la conversi√≥n.\n\nEjemplo: "Convierte 100 USD a EUR"';
      }
    }
  </script>
</body>
</html>
